nextflow_process {

    name "Test Process TEST_MODULE"
    script "./main.nf"
    process "TEST_MODULE"

    tag "test"

    test("test plugin") {

        setup {
            nfcoreSetup(launchDir)
            nfcoreInstall(launchDir, ["minimap2/index"])
            nfcoreLink(launchDir, baseDir)
        }

        then {
            assertAll(
                { assert path("${baseDir}/nf-core/minimap2/index/main.nf").exists() }
            )
        }

        cleanup {
            nfcoreCleanup(launchDir, baseDir)
        }

    }

}
